"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[420],{1382:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);const l=s.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},6420:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var l=s(5043),a=s(592),i=s(1987),o=s(1382),c=s(579);const r=e=>{const{data:t,onAttemptMade:s,score:r,imgNotFound:n}=e,[u,d]=(0,l.useState)();console.log(t);const[v,h]=(0,l.useState)(null===t||void 0===t?void 0:t.choiceDetails),[m,p]=(0,l.useState)(new Array(v.length).fill(null)),[_,f]=(0,l.useState)(0),[g,x]=(0,l.useState)([]),C=e=>{for(let t=(null===e||void 0===e?void 0:e.length)-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}};(0,l.useEffect)((()=>{t&&(()=>{let e=null===t||void 0===t?void 0:t.choiceDetails.map((e=>({value:e.value,image:e.image,state:"initial",isAlreadyChosen:!1})));C(e),e=[...e];let s=(0,i.U_)(null===t||void 0===t?void 0:t.choiceDetails);for(;g.includes(s);){const e=null===t||void 0===t?void 0:t.choiceDetails.filter((e=>!g.includes(e)));s=(0,i.U_)(e)}d({...s,isAlreadyChosen:!1}),e=e.flatMap((e=>[{...e,style:"list__item--uppercase",value:e.value.toUpperCase()},{...e,style:"list__item--lowercase",value:e.value},{...e,style:"list__item--belleallure",value:e.value}])),C(e),h(e)})()}),[t]),(0,l.useEffect)((()=>{u&&(0,a.A)(u.value)}),[u]),(0,l.useEffect)((()=>{if(_===m.length){s(),console.log("essaies termin\xe9s");const e=m.filter((e=>!0===e)).length/m.length*100;r(e)}}),[_,m.length]);return(0,c.jsxs)(l.Fragment,{children:[(0,c.jsx)("h2",{className:"exercice__consigne",children:t.exo_instruction}),"D1"===t.exo_type?(0,c.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(u.value),children:"?"}):(0,c.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/".concat(null===u||void 0===u?void 0:u.file),alt:"item",className:"exercice__img",onClick:()=>(0,a.A)(u.value),onError:e=>{e.target.src=n}}),(0,c.jsx)("ul",{className:"list",children:null===v||void 0===v?void 0:v.map(((e,t)=>(0,c.jsx)("li",{className:"list__item ".concat(e.style," ").concat(e.state),onClick:()=>{return e=t,void(v.filter((e=>"choosen"===e.state)).length<3&&h((t=>t.map(((t,s)=>s===e?{...t,state:"initial"===t.state?"choosen":"initial"}:t)))));var e},children:e.value},t)))}),(0,c.jsxs)("div",{className:"exercice__footer",children:[(0,c.jsx)("ul",{className:"progress",children:m.map((e=>(0,c.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")})))}),(0,c.jsxs)("button",{className:"exercice__valid",onClick:()=>{if(_<m.length){const e=v.filter((e=>"choosen"===e.state));if(e.length>0){const s=v.map((e=>"choosen"===e.state?{...e,state:e.value.toLowerCase()===u.value.toLowerCase()?"true":"false"}:{...e,state:e.value.toLowerCase()===u.value.toLowerCase()?"true":e.state}));h(s);const l=setTimeout((()=>{p((t=>{const s=[...t];return s[_]=e.some((e=>e.value.toLowerCase()===u.value)),s})),f((e=>(e+1<m.length&&d((0,i.U_)(null===t||void 0===t?void 0:t.choiceDetails)),e+1))),h((e=>e.map((e=>({...e,state:"initial"})))))}),1e3);return()=>clearTimeout(l)}}},children:["Ok ",(0,c.jsx)("img",{src:o.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=420.b34a7692.chunk.js.map