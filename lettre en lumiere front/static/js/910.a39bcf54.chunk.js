"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[910],{1382:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);const l=s.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},910:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var l=s(5043),a=s(592),i=s(1987),c=(s(6579),s(1382)),o=s(579);const n=e=>{const{data:t,onAttemptMade:s,score:n,imgNotFound:r}=e,[u,d]=(0,l.useState)(0),[m,v]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[f,_]=(0,l.useState)(null===t||void 0===t?void 0:t.choiceDetails),[g,x]=(0,l.useState)(new Array(f.length).fill(null));(0,l.useEffect)((()=>{if(null!==t&&void 0!==t&&t.choiceDetails){const e=null===t||void 0===t?void 0:t.choiceDetails.map((e=>({value:e.value,state:"initial",isAlreadyChosen:!1})));_(e),j(e)}}),[null===t||void 0===t?void 0:t.choiceDetails]);const j=e=>{const t=e.filter((e=>!e.isAlreadyChosen));if(t.length>0){const e=(0,i.U_)(t);v(e),(0,a.A)(e.value)}};(0,l.useEffect)((()=>{if(u>0&&u<g.length){const e=setTimeout((()=>{j(f),C()}),1e3);return()=>clearTimeout(e)}if(u===g.length&&0!==u){s();const e=g.filter((e=>!0===e)).length/g.length*100;n(e)}}),[u,s]),(0,l.useEffect)((()=>{(0,a.A)(m.value)}),[m]);const C=()=>{const e=f.map((e=>({...e,state:"initial"})));_(e)};return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)("p",{className:"exercice__consigne",children:t.exo_instruction}),(0,o.jsx)("div",{children:"B2"===t.exo_type?(0,o.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/"+m.file,alt:"",className:"exercice__img",onClick:()=>(0,a.A)(m.value),onError:e=>{e.target.src=r}}):(0,o.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(m.value),children:"?"})}),(0,o.jsx)("ul",{className:"list",children:null===f||void 0===f?void 0:f.map(((e,t)=>(0,o.jsx)("li",{className:"list__item ".concat(e.state),onClick:()=>(e=>{const t=f.map(((t,s)=>({...t,state:s===e?"choosen":"initial"})));_(t),p(f[e].value)})(t),children:e.value},t)))}),(0,o.jsxs)("div",{className:"exercice__footer",children:[(0,o.jsx)("ul",{className:"progress",children:g.map(((e,t)=>(0,o.jsx)("li",{className:"progress__part ".concat(!0===e?"progress__part--true":!1===e?"progress__part--false":"")},t)))}),(0,o.jsxs)("button",{className:"exercice__valid",onClick:()=>{if(!h||!m)return;const e=(null===h||void 0===h?void 0:h.toLowerCase())===(null===m||void 0===m?void 0:m.value.toLowerCase());x((t=>{const s=[...t];return s[u]=e,s})),_((t=>t.map((t=>t.value===m.value?{...t,isAlreadyChosen:!0,state:e?"true":"false"}:t))));const t=f.map((t=>t.value.toLowerCase()===h.toLowerCase()?{...t,state:e?"true":"false"}:t));_(t),setTimeout((()=>{C()}),1e3),d((e=>e+1))},children:["Ok ",(0,o.jsx)("img",{src:c.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=910.a39bcf54.chunk.js.map