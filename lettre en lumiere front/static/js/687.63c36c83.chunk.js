"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[687],{1382:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);const l=s.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},687:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var l=s(5043),c=s(1987),a=s(592),i=s(3216),n=s(1382),r=s(579);const o=e=>{const t=(0,l.useRef)(1),{data:s,score:o,onAttemptMade:u,isModalOpen:d,imgNotFound:m}=e,[p,f]=(0,l.useState)([]),[_,h]=(0,l.useState)(),[x,v]=(0,l.useState)(""),[g,j]=(0,l.useState)(0),[k,N]=(0,l.useState)(new Array(4).fill(null));(0,i.Zp)();(0,l.useEffect)((()=>{if(null!==s&&void 0!==s&&s.choiceDetails||null!==s&&void 0!==s&&s.rep_contenu){const e=(s.choiceDetails||s.rep_contenu).map((e=>({value:e.value,image:e.file,state:"initial"})));h(e)}}),[s]);const b=(0,l.useCallback)((()=>{if((null===_||void 0===_?void 0:_.length)>0){let e=[];for(let t=0;t<3;t++){let t=(0,c.U_)(_);e.includes(t)||e.push(t),f(e),v((0,c.U_)(e))}}}),[_]);(0,l.useEffect)((()=>{b()}),[b]),(0,l.useEffect)((()=>{x&&(0,a.A)(x.value)}),[x]);const C=e=>{null===p||void 0===p||p.map((e=>({...e,state:"initial"})));const s=document.querySelector(".exercice__count");p.find((e=>e.textContent===x));if(t.current<=4){t.current+=1;const l=p.map(((t,s)=>{if(s===e){const e=t.value===x.value;return(e=>{N((t=>{const s=[...t];return s[g]=e,s})),j(g+1)})(e),{...t,state:e?"true":"false"}}return t.value===x?{...t,state:"true"}:t}));if(f(l),t.current<=4||!1===s.textContent)setTimeout((()=>{null===p||void 0===p||p.forEach((e=>({...e,state:"initial"}))),b()}),1e3);else{const e=k.filter((e=>!0===e)).length/k.length*100;o(e),setTimeout((()=>{null===p||void 0===p||p.forEach((e=>({...e,state:"initial"}))),u()}),1e3)}console.log("tabItem",p)}};return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("h2",{className:"exercice__consigne",children:null===s||void 0===s?void 0:s.exo_instruction}),(0,r.jsx)("p",{className:"exercice__count",children:(0,r.jsx)(c.xx,{onCountdownFinish:()=>{if(!d){const e=k.filter((e=>!0===e)).length/k.length*100;o(e),u()}}})}),(0,r.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(x.value),children:"?"}),(0,r.jsx)("ul",{className:"list",children:null===p||void 0===p?void 0:p.map(((e,t)=>(0,r.jsx)("li",{className:"list__item ".concat(e.state),onClick:()=>C(t),children:e.value},t)))}),(0,r.jsxs)("div",{className:"exercice__footer",children:["G2"===s.exo_type&&(0,r.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/".concat(x.file),alt:x.value,className:"exercice__img",style:{marginBottom:"1rem"},onError:e=>{e.target.src=m}}),(0,r.jsx)("ul",{className:"progress",children:k.map((e=>(0,r.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")})))}),(0,r.jsxs)("button",{className:"exercice__valid",onClick:C,children:["Ok ",(0,r.jsx)("img",{src:n.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=687.63c36c83.chunk.js.map