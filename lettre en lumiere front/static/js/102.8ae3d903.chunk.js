"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[102],{1382:(e,r,t)=>{t.d(r,{A:()=>s});t(5043);const s=t.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},102:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});var s=t(5043),o=t(579);const n=function(e){let{as:r,dragId:t,dragType:n,...a}=e;const{draggable:l,dragStart:d,drag:i,dragEnd:p}=s.useContext(c);let g=r||"div";return(0,o.jsx)(g,{onDragStart:e=>d(e,t,n),onDrag:i,draggable:l,onDragEnd:p,...a})};const a=function(e){let{as:r,dropId:t,dropType:n,remember:a,style:l,children:d,...i}=e;const{dragItem:p,dragType:g,setDrop:u,drop:m,onDrop:x}=s.useContext(c);let h=r||"div";return(0,o.jsxs)(h,{onDragEnter:e=>{p&&n===g&&(u(t),console.log("Drag Enter, setting drop: ",t))},onDragOver:function(e){return e.preventDefault&&(e.preventDefault(),console.log("Drag Over DropZone: ",t)),!1},onDrop:x,style:{position:"relative",...l},...i,children:[d,m===t&&(0,o.jsx)("div",{style:{position:"absolute",inset:"0px"},onDragLeave:function(){a||u(null)}})]})};const l=function(e){let{dropType:r,prevId:t,nextId:n,split:l="y",remember:d,children:i,...p}=e;const{dragType:g,isDragging:u}=s.useContext(c);return(0,o.jsxs)("div",{style:{position:"relative"},...p,children:[i,g===r&&u&&(0,o.jsxs)("div",{style:{position:"absolute",inset:"0px",display:"flex",flexDirection:"x"===l?"row":"column"},children:[(0,o.jsx)(a,{dropId:t,style:{width:"100%",height:"100%"},dropType:r,remember:d}),(0,o.jsx)(a,{dropId:n,style:{width:"100%",height:"100%"},dropType:r,remember:d})]})]})};const d=function(e){let{as:r,dropId:t,...n}=e;const{drop:a}=s.useContext(c);let l=r||"div";return a===t?(0,o.jsx)(l,{...n}):null},c=s.createContext();const i=Object.assign((function(e){let{draggable:r=!0,handleDrop:t,children:n}=e;const[a,l]=s.useState(null),[d,i]=s.useState(null),[p,g]=s.useState(null),[u,m]=s.useState(null);return s.useEffect((()=>{document.body.style.cursor=a?"grabbing":"default"}),[a]),(0,o.jsx)(c.Provider,{value:{draggable:r,dragItem:a,dragType:d,isDragging:p,dragStart:function(e,r,t){e.stopPropagation(),e.dataTransfer.effectAllowed="move",l(r),i(t)},drag:function(e,r,t){e.stopPropagation(),g(!0)},dragEnd:function(){l(null),i(null),g(!1),m(null)},drop:u,setDrop:m,onDrop:function(e){e.preventDefault(),t({dragItem:a,dragType:d,drop:u}),l(null),i(null),g(!1),m(null)}},children:"function"===typeof n?n({activeItem:a,activeType:d,isDragging:p}):n})}),{DragItem:n,DropZone:a,DropZones:l,DropGuide:d});var p=t(1987),g=t(1382),u=t(592);const m=e=>{const{data:r,imgNotFound:t,score:n,onAttemptMade:a}=e,[l,d]=(0,s.useState)(null===r||void 0===r?void 0:r.choiceDetails),[c,m]=(0,s.useState)(),[x,h]=(0,s.useState)(0),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)([]),D=["exemple","v\xe9lo","test","barbe","consumer","fl\xe9chir","provoquer"],[b,I]=(0,s.useState)(new Array(5).fill(null));(0,s.useEffect)((()=>{(()=>{const e=(0,p.U_)(D);m(e);const r=e.split(""),t=r.shift(),s=(0,p.R3)(r);j([{id:1,name:"List 1",cards:s.map(((e,r)=>({id:r+1,name:e})))},{id:2,name:"List 2",cards:[{id:115,name:t}]}])})()}),[b]),(0,s.useEffect)((()=>{if(x===b.length){a(),console.log("essaies termin\xe9s");const e=b.filter((e=>!0===e)).length/b.length*100;n(e)}}),[x,b.length]),(0,s.useEffect)((()=>{c&&(0,u.A)(c)}),[c]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"exercice__consigne",children:null===r||void 0===r?void 0:r.exo_instruction}),"H1"!==r.exo_type?(0,o.jsx)("p",{className:"exercice__sound",onClick:()=>(0,u.A)(c),children:"?"}):(0,o.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices".concat(null===c||void 0===c?void 0:c.value,".jpg"),alt:"item",className:"exercice__img",onClick:()=>(0,u.A)(c.value),onError:e=>{e.target.src=t}}),f&&(0,o.jsx)("p",{className:"list__item",children:c}),(0,o.jsx)("div",{className:"p-10 flex flex-col max-w-full",children:(0,o.jsx)(i,{handleDrop:function(e){let{dragItem:r,dragType:t,drop:s}=e;if(console.log(s),"card"===t&&s){console.log(s);let e,[t,o]=s.split("-").map((e=>parseInt(e))),n=structuredClone(v),a=v.findIndex((t=>(e=t.cards.findIndex((e=>e.id===r)),e>=0))),l=v[a].cards[e];t===a&&e<o&&o--,n[a].cards.splice(e,1),n[t].cards.splice(o,0,l),j(n)}else console.log("Drop information is missing or incorrect.")},children:e=>{let{activeItem:r,activeType:t,isDragging:n}=e;return(0,o.jsxs)(i.DropZone,{className:"flex flex-col justify-center items-center -mx-2 ",children:[v&&(null===v||void 0===v?void 0:v.map(((e,a)=>(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(i.DropZone,{dropId:a,dropType:"list",remember:!0,children:(0,o.jsx)(i.DropGuide,{dropId:a,dropType:"list",className:"rounded-xl bg-gray-200 h-96 mx-2 my-5 shrink-0 grow-0"})}),(0,o.jsxs)(i.DropZones,{className:"flex flex-row justify-center items-center",prevId:a,nextId:a+1,dropType:"list",split:"x",remember:!0,children:[(0,o.jsx)(i.DragItem,{dragId:e.id,className:"cursor-pointer flex ".concat(r===e.id&&"list"===t&&n?"hidden":"translate-x-0"),dragType:"list",children:(0,o.jsxs)("ul",{name:e.name,className:"list rounded-xl bg-gray-100  my-5 shadow".concat(r===e.id&&"list"===t?" rotate-6":""),children:[v[a].cards.map(((e,s)=>(0,o.jsxs)(i.DropZones,{prevId:"".concat(a,"-").concat(s),nextId:"".concat(a,"-").concat(s+1),dropType:"card",remember:!0,children:[(0,o.jsx)(i.DropGuide,{dropId:"".concat(a,"-").concat(s),className:"rounded-lg bg-gray-200 w-24 m-2",dropType:"card"}),(0,o.jsx)(i.DragItem,{dragId:e.id,className:"cursor-pointer ".concat(r===e.id&&"card"===t&&n?"hidden":"translate-x-0"),dragType:"card",children:(0,o.jsx)("li",{className:"list__item rounded-lg bg-white border border-gray-300 shadow-sm p-5 m-2".concat(r===e.id&&"card"===t?" rotate-6":""),children:e.name})})]},e.id))),(0,o.jsx)(i.DropZone,{dropId:"".concat(a,"-").concat(v[a].cards.length),dropType:"card",remember:!0,children:(0,o.jsx)(i.DropGuide,{dropId:"".concat(a,"-").concat(v[a].cards.length),className:"rounded-lg bg-gray-200 w-24 m-2",dropType:"card"})})]})}),(0,o.jsx)(i.DropZone,{dropId:"".concat(a,"-").concat(v[a].cards.length),className:"grow",dropType:"card",remember:!0})]})]},e.id)))),(0,o.jsx)(i.DropZone,{dropId:null===v||void 0===v?void 0:v.length,dropType:"list",remember:!0,children:(0,o.jsx)(i.DropGuide,{dropId:null===v||void 0===v?void 0:v.length,dropType:"list",className:"rounded-xl bg-gray-200 mx-2 my-5 w-80 shrink-0 grow-0"})})]})}})}),(0,o.jsxs)("div",{className:"exercice__footer",children:[(0,o.jsx)("ul",{className:"progress",children:b.map(((e,r)=>(0,o.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")},r)))}),(0,o.jsxs)("button",{type:"submit",className:"exercice__valid",onClick:e=>{if(x<b.length){e.preventDefault();const t=v[1].cards.map((e=>e.name)).join("").toUpperCase()===c.toUpperCase();console.log("reponse correcte",t);const s=[...b];if(s[x]=t,I(s),h(x+1),r.exo_type.startsWith("H")){y(!0);const e=setTimeout((()=>{c&&(y(!1),(0,u.A)(c))}),3e3);return()=>clearTimeout(e)}}},children:["Ok ",(0,o.jsx)("img",{src:g.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=102.8ae3d903.chunk.js.map