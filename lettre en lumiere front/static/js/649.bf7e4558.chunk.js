"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[649],{1382:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);const l=t.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},4649:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var l=t(5043),c=t(1987),a=t(592),i=t(1382),n=t(579);const r=e=>{const{data:s,onAttemptMade:t,score:r,imgNotFound:o}=e,[u,p]=(0,l.useState)(),[d,_]=(0,l.useState)(""),[g,f]=(0,l.useState)(0),[h,v]=(0,l.useState)(new Array(null===s||void 0===s?void 0:s.choiceDetails.length).fill(null)),[m,x]=(0,l.useState)([]);(0,l.useRef)(null);(0,l.useEffect)((()=>{u&&(0,a.A)(u.value)}),[u]),(0,l.useEffect)((()=>{(()=>{if(g===h.length){const e=h.filter((e=>!0===e)).length/h.length*100;r(e),t()}else if(g<h.length&&(p((0,c.U_)(null===s||void 0===s?void 0:s.choiceDetails.filter((e=>!1===m.map((e=>e.value)).includes(e.value))))),u)){const e=m;e.push(u),x(e)}})()}),[g,t,h.length]);(0,l.useEffect)((()=>{u&&u.chosenSyllable&&((0,a.A)(u.value),"E2 bis"===s.exo_type&&u.chosenSyllable&&_(null===u||void 0===u?void 0:u.value.replace(new RegExp("[^".concat(null===u||void 0===u?void 0:u.chosenSyllable,"]"),"gi"),"_")))}),[u,s.exo_type]);const b=e=>{e.preventDefault();const s=(d.endsWith("_")?d.slice(0,-1):d).trim().toUpperCase()===u.value.toUpperCase(),t=[...h];t[g]=s,v(t),f(g+1),_("")};return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)("h2",{className:"exercice__consigne",children:null===s||void 0===s?void 0:s.exo_instruction}),(0,n.jsxs)("div",{className:"group",children:["E1"!==s.exo_type&&(0,n.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/"+(null===u||void 0===u?void 0:u.file),alt:"",className:"exercice__img",onClick:()=>(0,a.A)(u.value),onError:e=>{e.target.src=o}}),(0,n.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(u.value),children:"?"})]}),(0,n.jsx)("form",{onSubmit:b,className:"exercice__form",children:(0,n.jsx)("input",{type:"text",value:d,className:"exercice__input",onKeyDown:e=>(e=>{if("Backspace"===e.key){const e=d.lastIndexOf("_");if(-1!==e){const s=d.substring(0,e)+"_"+d.substring(e+1);_(s)}}})(e),onChange:e=>(e=>{const s=e.target.value;if(u.chosenSyllable){if(s.length<d.length)return void _(d.replace(/[^_]/g,"_"));const e=s.slice(-1),t=d.indexOf("_");if(-1!==t){let s=d.substring(0,t)+e+d.substring(t+1);s.includes("_"),_(s)}}else _(e.target.value)})(e),autoFocus:!0})}),(0,n.jsxs)("div",{className:"exercice__footer",children:[(0,n.jsx)("ul",{className:"progress",children:h.map(((e,s)=>(0,n.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")},s)))}),(0,n.jsxs)("button",{type:"submit",className:"exercice__valid",onClick:b,children:["Ok ",(0,n.jsx)("img",{src:i.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=649.bf7e4558.chunk.js.map