"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[811],{1382:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);const l=s.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},6811:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var l=s(5043),a=s(592),r=s(1382),c=s(7902),i=s(579);const n=e=>{const{data:t,onAttemptMade:s,score:n,imgNotFound:o}=e,[u,p]=(0,l.useState)(null===t||void 0===t?void 0:t.choice),[d,_]=(0,l.useState)(0),[m,g]=(0,l.useState)(""),[h,v]=(0,l.useState)(!0),[f,x]=(0,l.useState)(new Array(u.length).fill(null)),[j,b]=(0,l.useState)(0);(0,l.useEffect)((()=>{if(j!==f.length||0===j){v(!0);const e=setTimeout((()=>{u&&(v(!1),(0,a.A)(u[d].value))}),3e3);return()=>clearTimeout(e)}{s();const e=f.filter((e=>!0===e)).length/f.length*100;n(e)}}),[j,u,d,f]),(0,l.useEffect)((()=>{let e="";const t=u[d];e=null!==t&&void 0!==t&&t.chosenSyllable?t.value.split("").map((e=>t.chosenSyllable.includes(e)?"_":e)).join(""):t.value.replace(/./g,"_"),g(e),(0,a.A)(t.value)}),[u,d]);const k=e=>{var t;e.preventDefault();const s=(m.endsWith("_")?m.slice(0,-1):m).trim().toUpperCase()===(null===(t=u[d])||void 0===t?void 0:t.value.toUpperCase()),l=[...f];l[j]=s,x(l),b(j+1),g(""),d+1<u.length&&_((e=>e+1))};return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsxs)("div",{className:"exercice__consigne",children:[(0,i.jsx)("img",{src:c.A,alt:""}),(0,i.jsx)("h1",{children:null===t||void 0===t?void 0:t.exo_instruction})]}),(0,i.jsx)("div",{children:h?(0,i.jsxs)("div",{children:["C1"!==t.exo_type&&(0,i.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/".concat(u[d].file),alt:u[d].value,className:"exercice__img",style:{marginBottom:"1rem"},onError:e=>{e.target.src=o}}),(0,i.jsx)("p",{className:"list__item",children:u[d].value})]}):(0,i.jsx)("form",{onSubmit:k,className:"exercice__form",children:(0,i.jsx)("input",{type:"text",value:m,className:"exercice__input",onKeyDown:e=>(e=>{if("Backspace"===e.key){e.preventDefault();let t=m.split("").lastIndexOf("_")-1;t=t>=0?t:m.length-1;const s=m.split("").map(((e,s)=>s===t?"_":e)).join("");g(s)}})(e),onChange:e=>(e=>{const t=e.target.value;if(t.length<m.length)return void g(m.replace(/[^_]/g,"_"));const s=t.slice(-1),l=m.indexOf("_");if(-1!==l){let e=m.substring(0,l)+s+m.substring(l+1);g(e)}})(e),autoFocus:!0})})}),(0,i.jsxs)("div",{className:"exercice__footer",children:[(0,i.jsx)("ul",{className:"progress",children:f.map(((e,t)=>(0,i.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")},t)))}),(0,i.jsxs)("button",{className:"exercice__valid",onClick:k,children:["Ok ",(0,i.jsx)("img",{src:r.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=811.f1676c35.chunk.js.map