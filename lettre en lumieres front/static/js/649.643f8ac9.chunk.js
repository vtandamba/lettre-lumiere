"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[649],{1382:(e,s,l)=>{l.d(s,{A:()=>t});l(5043);const t=l.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},4649:(e,s,l)=>{l.r(s),l.d(s,{default:()=>o});var t=l(5043),i=l(1987),c=l(592),a=l(1382),n=l(7902),r=l(579);const o=e=>{const{data:s,onAttemptMade:l,score:o,imgNotFound:u}=e,[p,d]=(0,t.useState)(),[v,_]=(0,t.useState)(""),[g,h]=(0,t.useState)(0),[m,f]=(0,t.useState)(new Array(null===s||void 0===s?void 0:s.choice.length).fill(null)),[x,j]=(0,t.useState)([]);(0,t.useEffect)((()=>{p&&((0,c.A)(p.value),console.log(p))}),[p]),(0,t.useEffect)((()=>{(()=>{if(g===m.length){const e=m.filter((e=>!0===e)).length/m.length*100;o(e),l()}else if(g<m.length&&(d((0,i.U_)(null===s||void 0===s?void 0:s.choice.filter((e=>!1===x.map((e=>e.value)).includes(e.value))))),p)){const e=x;e.push(p),j(e)}})()}),[g,l,m.length]);(0,t.useEffect)((()=>{let e="";e=p&&p.chosenSyllable?p.value.split("").map((e=>p.chosenSyllable.includes(e)?"_":e)).join(""):null===p||void 0===p?void 0:p.value.replace(/./g,"_"),_(e),(0,c.A)(null===p||void 0===p?void 0:p.value)}),[p]);const b=e=>{e.preventDefault();const s=(v.endsWith("_")?v.slice(0,-1):v).trim().toUpperCase()===(null===p||void 0===p?void 0:p.value.toUpperCase()),l=[...m];l[g]=s,f(l),h(g+1),_("")};return(0,r.jsxs)(t.Fragment,{children:[(0,r.jsxs)("div",{className:"exercice__consigne",children:[(0,r.jsx)("img",{src:n.A,alt:""}),(0,r.jsx)("h1",{children:null===s||void 0===s?void 0:s.exo_instruction})]}),(0,r.jsxs)("div",{className:"group",children:["E1"!==s.exo_type&&(0,r.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/"+(null===p||void 0===p?void 0:p.file),alt:"",className:"exercice__img",onClick:()=>(0,c.A)(null===p||void 0===p?void 0:p.value),onError:e=>{e.target.src=u}}),(0,r.jsx)("p",{className:"exercice__sound",onClick:()=>(0,c.A)(p.value),children:"?"})]}),(0,r.jsx)("form",{onSubmit:b,className:"exercice__form",children:(0,r.jsx)("input",{type:"text",value:v,className:"exercice__input",onKeyDown:e=>(e=>{if("Backspace"===e.key){e.preventDefault();let s=v.split("").lastIndexOf("_")-1;s=s>=0?s:v.length-1;const l=v.split("").map(((e,l)=>l===s?"_":e)).join("");_(l)}})(e),onChange:e=>(e=>{const s=e.target.value;if(s.length<v.length)return void _(v.replace(/[^_]/g,"_"));const l=s.slice(-1),t=v.indexOf("_");if(-1!==t){let e=v.substring(0,t)+l+v.substring(t+1);_(e)}})(e),autoFocus:!0})}),(0,r.jsxs)("div",{className:"exercice__footer",children:[(0,r.jsx)("ul",{className:"progress",children:m.map(((e,s)=>(0,r.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")},s)))}),(0,r.jsxs)("button",{type:"submit",className:"exercice__valid",onClick:b,children:["Ok ",(0,r.jsx)("img",{src:a.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=649.643f8ac9.chunk.js.map