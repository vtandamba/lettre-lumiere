"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[687],{1382:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);const l=s.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},687:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var l=s(5043),c=s(1987),a=s(592),i=s(7902),n=s(1382),r=s(579);const o=e=>{const t=(0,l.useRef)(1),{data:s,score:o,onAttemptMade:u,isModalOpen:_,imgNotFound:d}=e,[m,p]=(0,l.useState)([]),[f,v]=(0,l.useState)(),[h,x]=(0,l.useState)(""),[g,j]=(0,l.useState)(0),[S,E]=(0,l.useState)(new Array(4).fill(null));(0,l.useEffect)((()=>{if(null!==s&&void 0!==s&&s.choice||null!==s&&void 0!==s&&s.rep_contenu){const e=(s.choice||s.choices).map((e=>({value:e.value,image:e.file,state:"initial"})));v(e)}}),[s]);const C=(0,l.useCallback)((()=>{if((null===f||void 0===f?void 0:f.length)>0){let e=[];for(let t=0;t<3;t++){let t=(0,c.U_)(f);e.includes(t)||e.push(t),p(e),x((0,c.U_)(e))}}}),[f]);(0,l.useEffect)((()=>{C()}),[C]),(0,l.useEffect)((()=>{h&&(0,a.A)(h.value)}),[h]);const N=e=>{null===m||void 0===m||m.map((e=>({...e,state:"initial"})));const s=document.querySelector(".exercice__count");if(t.current<=4){t.current+=1;const l=m.map(((t,s)=>{if(s===e){const e=t.value===h.value;return(e=>{E((t=>{const s=[...t];return s[g]=e,s})),j(g+1)})(e),{...t,state:e?"true":"false"}}return t.value===h?{...t,state:"true"}:t}));if(p(l),t.current<=4||!1===s.textContent)setTimeout((()=>{null===m||void 0===m||m.forEach((e=>({...e,state:"initial"}))),C()}),1e3);else{const e=S.filter((e=>!0===e)).length/S.length*100;o(e),setTimeout((()=>{null===m||void 0===m||m.forEach((e=>({...e,state:"initial"}))),u()}),1e3)}console.log("tabItem",m)}};return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("div",{className:"exercice__consigne",children:[(0,r.jsx)("img",{src:i.A,alt:""}),(0,r.jsx)("h1",{children:null===s||void 0===s?void 0:s.exo_instruction})]}),(0,r.jsx)("p",{className:"exercice__count",children:(0,r.jsx)(c.xx,{onCountdownFinish:()=>{if(!_){const e=S.filter((e=>!0===e)).length/S.length*100;o(e),u()}}})}),(0,r.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(h.value),children:"?"}),(0,r.jsx)("ul",{className:"list",children:null===m||void 0===m?void 0:m.map(((e,t)=>(0,r.jsx)("li",{className:"list__item ".concat(e.state),onClick:()=>N(t),children:e.value},t)))}),(0,r.jsxs)("div",{className:"exercice__footer",children:["G2"===s.exo_type&&(0,r.jsx)("img",{src:"".concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"https://vtandamb.lpmiaw.univ-lr.fr/PHP/lettre_en_lumiere/back-lettre-en-lumiere/api/"}.URL_IMG).concat(h.file),alt:h.value,className:"exercice__img",style:{marginBottom:"1rem"},onError:e=>{e.target.src=d}}),(0,r.jsx)("ul",{className:"progress",children:S.map((e=>(0,r.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")})))}),(0,r.jsxs)("button",{className:"exercice__valid",onClick:N,children:["Ok ",(0,r.jsx)("img",{src:n.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=687.62189032.chunk.js.map