"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[420],{1382:(e,t,l)=>{l.d(t,{A:()=>s});l(5043);const s=l.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},6420:(e,t,l)=>{l.r(t),l.d(t,{default:()=>n});var s=l(5043),a=l(592),i=l(7902),o=l(1987),c=l(1382),r=l(579);const n=e=>{const{data:t,onAttemptMade:l,score:n,imgNotFound:u}=e,[d,v]=(0,s.useState)(),[h,m]=(0,s.useState)(null===t||void 0===t?void 0:t.choice),[_,p]=(0,s.useState)(new Array(h.length).fill(null)),[f,g]=(0,s.useState)(0),[x,j]=(0,s.useState)([]),C=e=>{for(let t=(null===e||void 0===e?void 0:e.length)-1;t>0;t--){const l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}};(0,s.useEffect)((()=>{t&&(()=>{let e=null===t||void 0===t?void 0:t.choice.map((e=>({value:e.value,image:e.image,state:"initial",isAlreadyChosen:!1})));C(e),e=[...e];let l=(0,o.U_)(null===t||void 0===t?void 0:t.choice);for(;x.includes(l);){const e=null===t||void 0===t?void 0:t.choice.filter((e=>!x.includes(e)));l=(0,o.U_)(e)}v({...l,isAlreadyChosen:!1}),e=e.flatMap((e=>[{...e,style:"list__item--uppercase",value:e.value.toUpperCase()},{...e,style:"list__item--lowercase",value:e.value},{...e,style:"list__item--belleallure",value:e.value}])),C(e),m(e)})()}),[t]),(0,s.useEffect)((()=>{d&&(0,a.A)(d.value)}),[d]),(0,s.useEffect)((()=>{if(f===_.length){l();const e=_.filter((e=>!0===e)).length/_.length*100;n(e)}}),[f,_.length]);return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("div",{className:"exercice__consigne",children:[(0,r.jsx)("img",{src:i.A,alt:""}),(0,r.jsx)("h1",{children:null===t||void 0===t?void 0:t.exo_instruction})]}),"D1"===t.exo_type?(0,r.jsx)("p",{className:"exercice__sound",onClick:()=>(0,a.A)(d.value),children:"?"}):(0,r.jsx)("img",{src:"http://lettrelumiere.localhost:8000/".concat(null===d||void 0===d?void 0:d.file),alt:"item",className:"exercice__img",onClick:()=>(0,a.A)(d.value),onError:e=>{e.target.src=u}}),(0,r.jsx)("ul",{className:"list",children:null===h||void 0===h?void 0:h.map(((e,t)=>(0,r.jsx)("li",{className:"list__item ".concat(e.style," ").concat(e.state),onClick:()=>{return e=t,void(h.filter((e=>"choosen"===e.state)).length<3&&m((t=>t.map(((t,l)=>l===e?{...t,state:"initial"===t.state?"choosen":"initial"}:t)))));var e},children:e.value},t)))}),(0,r.jsxs)("div",{className:"exercice__footer",children:[(0,r.jsx)("ul",{className:"progress",children:_.map((e=>(0,r.jsx)("li",{className:"".concat(null===e?"progress__part":!0===e?"progress__part progress__part--true":"progress__part progress__part--false")})))}),(0,r.jsxs)("button",{className:"exercice__valid",onClick:()=>{if(f<_.length){const e=h.filter((e=>"choosen"===e.state));if(e.length>0){const l=h.map((e=>"choosen"===e.state?{...e,state:e.value.toLowerCase()===d.value.toLowerCase()?"true":"false"}:{...e,state:e.value.toLowerCase()===d.value.toLowerCase()?"true":e.state}));m(l);const s=setTimeout((()=>{p((t=>{const l=[...t];return l[f]=e.some((e=>e.value.toLowerCase()===d.value)),l})),g((e=>(e+1<_.length&&v((0,o.U_)(null===t||void 0===t?void 0:t.choice)),e+1))),m((e=>e.map((e=>({...e,state:"initial"})))))}),1e3);return()=>clearTimeout(s)}}},children:["Ok ",(0,r.jsx)("img",{src:c.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=420.9471af51.chunk.js.map