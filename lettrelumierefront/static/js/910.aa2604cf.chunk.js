"use strict";(self.webpackChunkprojettut=self.webpackChunkprojettut||[]).push([[910],{1382:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);const l=t.p+"static/media/check.ecf149c7bad9021580587be9fbf1b5aa.svg"},910:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var l=t(5043),i=t(592),a=t(1987),c=t(1382),o=t(7902),n=t(579);const r=e=>{const{data:s,onAttemptMade:t,score:r,imgNotFound:u}=e,[d,v]=(0,l.useState)(0),[m,h]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[x,_]=(0,l.useState)(null===s||void 0===s?void 0:s.choice),[g,j]=(0,l.useState)(new Array(x.length).fill(null));(0,l.useEffect)((()=>{if(null!==s&&void 0!==s&&s.choice){const e=null===s||void 0===s?void 0:s.choice.map((e=>({value:e.value,file:e.file,state:"initial",isAlreadyChosen:!1})));_(e),C(e)}}),[null===s||void 0===s?void 0:s.choiceDetails]);const C=e=>{const s=e.filter((e=>!e.isAlreadyChosen));if(s.length>0){const e=(0,a.U_)(s);h(e),(0,i.A)(e.value)}};(0,l.useEffect)((()=>{if(d>0&&d<g.length){const e=setTimeout((()=>{C(x),A()}),1e3);return()=>clearTimeout(e)}if(d===g.length&&0!==d){t();const e=g.filter((e=>!0===e)).length/g.length*100;r(e)}}),[d,t]),(0,l.useEffect)((()=>{(0,i.A)(m.value)}),[m]);const A=()=>{const e=x.map((e=>({...e,state:"initial"})));_(e)};return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)("div",{className:"exercice__consigne",children:[(0,n.jsx)("img",{src:o.A,alt:""}),(0,n.jsx)("h1",{children:null===s||void 0===s?void 0:s.exo_instruction})]}),(0,n.jsx)("div",{children:"B2"===s.exo_type?(0,n.jsx)("img",{src:"https://mtsene.lpmiaw.univ-lr.fr/lettrelumiere/public/images/choices/"+m.file,alt:"",className:"exercice__img",onClick:()=>(0,i.A)(m.value),onError:e=>{e.target.src=u}}):(0,n.jsx)("p",{className:"exercice__sound",onClick:()=>(0,i.A)(null===m||void 0===m?void 0:m.value),children:"?"})}),(0,n.jsx)("ul",{className:"list",children:null===x||void 0===x?void 0:x.map(((e,s)=>(0,n.jsx)("li",{className:"list__item ".concat(e.state),onClick:()=>(e=>{const s=x.map(((s,t)=>({...s,state:t===e?"choosen":"initial"})));_(s),p(x[e].value)})(s),children:e.value},s)))}),(0,n.jsxs)("div",{className:"exercice__footer",children:[(0,n.jsx)("ul",{className:"progress",children:g.map(((e,s)=>(0,n.jsx)("li",{className:"progress__part ".concat(!0===e?"progress__part--true":!1===e?"progress__part--false":"")},s)))}),(0,n.jsxs)("button",{className:"exercice__valid",onClick:()=>{if(!f||!m)return;const e=(null===f||void 0===f?void 0:f.toLowerCase())===(null===m||void 0===m?void 0:m.value.toLowerCase());j((s=>{const t=[...s];return t[d]=e,t})),_((s=>s.map((s=>s.value===m.value?{...s,isAlreadyChosen:!0,state:e?"true":"false"}:s))));const s=x.map((s=>s.value.toLowerCase()===f.toLowerCase()?{...s,state:e?"true":"false"}:s));_(s),setTimeout((()=>{A()}),1e3),v((e=>e+1))},children:["Ok ",(0,n.jsx)("img",{src:c.A,alt:"ok"})]})]})]})}}}]);
//# sourceMappingURL=910.aa2604cf.chunk.js.map